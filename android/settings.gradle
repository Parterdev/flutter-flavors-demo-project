pluginManagement {
    // Esta función busca la ruta de tu SDK de Flutter desde el archivo local.properties
    // que debe estar en la raíz de tu proyecto Flutter (un nivel arriba de la carpeta 'android')
    def flutterSdkPath = {
        def properties = new Properties()
        // Corregimos la ruta para buscar local.properties en la raíz del proyecto Flutter
        def localPropertiesFile = new File(settingsDir.parentFile, "local.properties")
        assert localPropertiesFile.exists(), "local.properties not found in Flutter project root. Create one with a flutter.sdk entry."
        localPropertiesFile.withInputStream { properties.load(it) }
        def flutterSdk = properties.getProperty("flutter.sdk")
        assert flutterSdk != null, "flutter.sdk not set in local.properties"
        return flutterSdk
    }()

    // Esto le dice a Gradle dónde encontrar los plugins de compilación de Flutter
    includeBuild "$flutterSdkPath/packages/flutter_tools/gradle"
}

plugins {
    // Declara el plugin de Flutter para que esté disponible
    id "dev.flutter.flutter-gradle-plugin" version "1.0.0" apply false
}

// Incluye tu módulo de aplicación Android principal
include ':app'

// Aplica el plugin de Flutter a este archivo settings.gradle,
// lo que permite que configure la integración de Flutter con tus subproyectos (como :app)
apply plugin: 'dev.flutter.flutter-gradle-plugin'
